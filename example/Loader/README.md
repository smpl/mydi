# Базовое знакомство с LoaderInterface

Основная проблема которая возникает при работе с зависимостями это как загружать только те зависимости что необходимы и не загружать стороннего, при этом работу с зависимостями сделать простой и прозрачной, как раз эту проблему и решают загрузкчики.

Любой загрузчик реализует интерфейс [LoaderInterface](../../src/LoaderInterface.php). В котором есть 2 метода:

1. **isLoadable** который по имени контейнера(**$containerName**) сообщает может ли он его загрузить (**true**) или нет (**false**).
2. **load** который по имени контейнера (**$containerName**) загружает результат который будет установлен в **LocatorInterface**, это может быть как: int, bool, string, float, object, closure и тд (так и объекты с интерфейсом [ContainerInterface](../Container) которые обрабатываются по особенному).

## Как это работает ?
В конструктор **LocatorInterface** можно передать массив из загрузчиков которые могут быть использованны для получения запрощенного элемента.

Когда вы запрашиваете элемент (например: magic) у LocatorInterface он проверяет определен ли он уже, если не определен то Locator опрашивает каждый загрузчик (в порядке элементов в массиве) который ему был передан, сможет ли хоть один загрузчик загрузить элемент(isLoadable('magic')), если загрузчик сообщил что он знает как загружать элемент, то Locator просит его загрузить (load('magic')) и запоминает как он определен, чтобы в дальнейшем не обращаться к загрузчикам.

Таким образом загружаются только необходимые элементы.

## Практический пример
В системе в стандартном варианте идет несколько загрузчиков, о каждом будет отдельно рассказано и показано, здесь я в качестве примера лишь покажу простой пример как создать \stdObject с параметрами для подключения к БД (я не хочу для тестов постоянно поднимать базу данных и модули вроде php5-mysql устанавливать поэтому буду использовать объект \stdObject но вместо него может быть что угодно).

Также один загрузчик может использовать возможности другова загрузчика так как взаимодействие осуществляется через LocatorInterface

Описание использованных загрузчиков будет отдельно.

## Свои загрузчик
Легко можно расширить стандартную комплектацию реализовав свой удобный загрузчик который реализует интерфейс [LoaderInterface](../../src/LoaderInterface.php) я рекомендую именно так и расширять.

Например можно реализовать Loader который на основе Reflection будет определять зависимости, а также на основе анотаций, для этого можно сделать отдельный модуль в композер например mydi-loader-reflection и в завимости ему добавить mydi ну и какой нибудь модуль для работы с анотациями, этот загрузчик я собираюсь сделать отдельно.

Другой пример загрузчика чтобы класс имел определенный метод (например реализуя интерфейс) который будет загружать данный объект, получится что то похожее на ServiceLocator.